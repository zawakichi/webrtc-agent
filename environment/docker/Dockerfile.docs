# MkDocs documentation container
FROM python:3.11-alpine

# MkDocsに必要なパッケージをインストール
RUN apk add --no-cache \
    git \
    gcc \
    musl-dev \
    linux-headers

# 作業ディレクトリを設定
WORKDIR /docs

# MkDocsと必要なプラグインをインストール
RUN pip install --no-cache-dir \
    mkdocs \
    mkdocs-material \
    mkdocs-mermaid2-plugin \
    mkdocs-awesome-pages-plugin \
    mkdocs-git-revision-date-localized-plugin \
    mkdocs-minify-plugin \
    mkdocs-macros-plugin \
    pymdown-extensions

# ポート8888を公開
EXPOSE 8888

# MkDocsの開発サーバーを起動
CMD ["mkdocs", "serve", "--dev-addr=0.0.0.0:8888"]